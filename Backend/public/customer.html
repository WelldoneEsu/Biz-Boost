<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Customer Management | BizBoost</title>
  <link rel="stylesheet" href="customer.css" />
   <link rel="icon" type="image/x-icon" href="Assets/logo.png" width="100px" height="100px">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
</head>
<body>
  <div class="dashboard-container">
    <!-- Sidebar -->
<aside class="sidebar">
  <div class="brand">
    <img src="Assets/LOGO-TRANS 1.png" alt="BizBoost Logo" width="120"/>
  </div>
  <nav>
    <button class="nav-link" data-target="dashboard" onclick="location.href='dashboard.html'">
      <i class="fa fa-chart-line"></i> Dashboard
    </button>
    <button class="nav-link" data-target="sales" onclick="location.href='sales.html'">
      <i class="fa fa-shopping-cart"></i> Sales And Order
    </button>
    <button class="nav-link" data-target="inventory" onclick="location.href='inventory.html'">
      <i class="fa fa-box"></i> Inventory
    </button>
    <button class="nav-link" data-target="customers" onclick="location.href='customer.html'">
      <i class="fa fa-users"></i> Customer Management
    </button>
    <button class="nav-link" data-target="delivery" onclick="location.href='delivery.html'">
      <i class="fa fa-truck"></i> Delivery Management
    </button>
    <button class="nav-link" data-target="suppliers" onclick="location.href='suppliers.html'">
      <i class="fa fa-industry"></i> Supplier Management
    </button>
    <button class="nav-link" data-target="settings" onclick="location.href='settings.html'">
      <i class="fa fa-gear"></i> Settings
    </button>
  </nav>
</aside>


    <!-- Main -->
    <main class="content">
      <!-- Topbar -->
      <header class="topbar">
          <div>
            <strong>Customer Management</strong><br>
          </div>
          <span class="spacer"></span>
        <img src="Assets/logo.png" alt="bizboost logo" width="70px;" />
      </header>

      <!-- Customer Management Section -->
      <section id="customers" class="page visible">
        <h1></h1>

        <!-- KPI Cards -->
        <div class="kpis">
          <div class="card kpi">
            <i class="fa fa-check-circle"></i>
            <div>
              <p>Total Paid</p>
              <h2 id="kpiPaid">0</h2>
            </div>
          </div>
          <div class="card kpi">
            <i class="fa fa-wallet"></i>
            <div>
              <p>Total Owed</p>
              <h2 id="kpiOwed">0</h2>
            </div>
          </div>
          <div class="card kpi">
            <i class="fa fa-exclamation-circle"></i>
            <div>
              <p>Overdue Payment</p>
              <h2 id="kpiOverdue">0</h2>
            </div>
          </div>
        </div>

        <!-- Toolbar -->
        <div class="toolbar">
          <div class="left-tools">
            <select id="filterSelect">
              <option value="all">Filter: All</option>
              <option value="paid">Paid</option>
              <option value="owed">Owed</option>
              <option value="overdue">Overdue</option>
            </select>
            <input type="search" id="searchInput" placeholder="Search" />
          </div>
          <div class="right-tools">
            <button class="btn secondary" id="exportExcelBtn">Export to Excel</button>
            <button class="btn primary" id="addCustomerBtn">Add Customer</button>
          </div>
        </div>

        <!-- Table + Right Sidebar -->
        <div class="grid-two">
          <!-- Customer Table -->
          <div class="card table-card">
            <table>
              <thead>
                <tr>
                  <th>S/N</th>
                  <th>Customer Name</th>
                  <th>Package Worth</th>
                  <th>Quantity</th>
                  <th>Payment Date</th>
                  <th>Status</th>
                  <th>Action</th>
                </tr>
              </thead>
              <tbody id="customerTableBody">
                <!-- Filled dynamically -->
              </tbody>
            </table>
          </div>

          <!-- Right Sidebar -->
          <aside class="stats">
            <!-- Overdue Payment -->
            <div class="card">
              <div class="card-header">
                <h3>Overdue Payment</h3>
                <div class="tabs">
                  <button id="custMonthlyTab" class="active">Monthly</button>
                  <button id="custYearlyTab">Yearly</button>
                </div>
              </div>
              <canvas id="customerOverdueChart" height="120"></canvas>
            </div>

            <!-- Top Customers -->
            <div class="card">
              <h3>Top Customers</h3>
              <ul id="topCustomersList">
                <!-- Filled dynamically -->
              </ul>
            </div>
          </aside>
        </div>
      </section>
    </main>
  </div>

  <!-- Add Customer Modal -->
  <div class="modal" id="addCustomerModal">
    <div class="modal-content">
      <span class="close">&times;</span>
      <h2>Add Customer</h2>
      <form id="addCustomerForm">
        <label>Customer Name</label>
        <input type="text" id="custName" required />

        <label>Package Worth (â‚¦)</label>
        <input type="number" id="custAmount" required />

        <label>Quantity</label>
        <input type="number" id="custQty" required />

        <label>Payment Date</label>
        <input type="date" id="custDate" required />

        <label>Status</label>
        <select id="custStatus">
          <option value="paid">Paid</option>
          <option value="owed">Owed</option>
        </select>

        <button type="submit" class="btn primary">Add Customer</button>
      </form>
    </div>
  </div>

  <!-- External Libraries -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>

  <!-- Customer Logic -->
  <script src="customer.js"></script>

    <script>
  document.addEventListener("DOMContentLoaded", () => {
    const path = window.location.pathname;

    document.querySelectorAll(".nav-link").forEach(link => {
      const target = link.getAttribute("data-target");

      if (
        (target === "dashboard" && path.includes("dashboard.html")) ||
        (target === "sales" && path.includes("sales.html")) ||
        (target === "inventory" && path.includes("inventory.html")) ||
        (target === "customers" && path.includes("customer.html")) ||
        (target === "delivery" && path.includes("delivery.html")) ||
        (target === "suppliers" && path.includes("suppliers.html")) ||
        (target === "settings" && path.includes("settings.html"))
      ) {
        link.classList.add("active");
      } else {
        link.classList.remove("active");
      }
    });
  });
</script>
    <script>
        // Go Back button
        document.getElementById('goBackBtn').addEventListener('click', () => {
        window.history.back();
        });
    
        // Modal functionality
        const modal = document.getElementById('purchaseModal');
        const addPurchaseBtn = document.getElementById('addPurchaseBtn');
        const closeModalBtn = document.getElementById('closeModal');
    
        addPurchaseBtn.onclick = () => {
        modal.classList.add('active');
        };
        closeModalBtn.onclick = () => {
        modal.classList.remove('active');
        };
        window.onclick = (event) => {
        if (event.target === modal) {
            modal.classList.remove('active');
        }
        };
    </script>
     <footer>
    <nav class="bottom-nav">
      <button class="nav-bttm" data-target="dashboard" onclick="location.href='dashboard.html'" title="Dashboard">
        <i class="fa fa-chart-line"><br><p>Dashboard</p></i>
      </button>
      <button class="nav-bttm active" data-target="sales" onclick="location.href='sales.html'" title="Sales And Order">
        <i class="fa fa-shopping-cart"><br><p>Sales</p></i>
      </button>
      <button class="nav-bttm" data-target="inventory" onclick="location.href='inventory.html'" title="Inventory">
        <i class="fa fa-box"><br><p>Inventory</p></i>
      </button>
      <button class="nav-bttm" data-target="customers" onclick="location.href='customer.html'" title="Customer Management">
        <i class="fa fa-users"><br><p>Customers</p></i>
      </button>
      <button class="nav-bttm" data-target="delivery" onclick="location.href='delivery.html'" title="Delivery Management">
        <i class="fa fa-truck"><br><p>Delivery</p></i>
      </button>
      <button class="nav-bttm" data-target="suppliers" onclick="location.href='suppliers.html'" title="Supplier Management">
        <i class="fa fa-industry"><br><p>Suppliers</p></i>
      </button>
      <button class="nav-bttm" data-target="settings" onclick="location.href='settings.html'" title="Settings">
        <i class="fa fa-gear"><br><p>Settings</p></i>
      </button>
    </nav>
</footer>
</body>
</html>
